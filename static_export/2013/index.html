<html>
<head>
  <title>   2013 | Jan's Home</title>
  <link rel="stylesheet" href="//l4x.org/l4x.css" type="text/css" media="screen" />
  <meta name="description" content="l4x.org - Jan Dittmer's Homepage" />
  <meta name="keywords" lang="de" content="elektronik, linux, Jan Dittmer, Jan, Dittmer, software, programmierung, blog, css, html, stylesheet, firefox,ipv6ident, ipv6, ip query firefox, ohg99, otto-hahn gymnasium, atmel, avr" />
  <meta name="ICBM" content="53.5467, 9.9783"/>
  <meta name="DC.title" content="l4x.org - Jan Dittmer's Homepage"/>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  </style>
</head>
<body>
<div id="header">
<div class="logo">
<span style="">l</span>
<span style="color:#ffe450;">4</span>
<span style="color:#000000;">x</span>
<span style="">.</span>
<span style="">o</span>
<span style="">r</span>
<span style="">g</span>
</div>

<div id="alpha">
	alpha playground
</div>

<div id="userinfo">
        &nbsp;
</div>

</div> <!-- header -->

<div id="mainnav">
<ul class="hori">
<!-- internal links -->
<li><a href="https://l4x.org">Home</a></li>
<li><a href="https://l4x.org/projects">Projects</a></li>
<!-- external links -->
<!-- broken
<li><a href="http://home.l4x.org/pics/">Pics</a></li>
-->
<li><a href="https://dns.l4x.org">dns.</a></li>
<li><a href="https://git.l4x.org">git.</a></li>
<li><a href="https://l4x.org/k/">Kernel-Tests</a></li>
<li><a href="https://www.trixing.de">Trixing</a></li>
<li><a href="https://l4x.org/imprint.html">Imprint</a></li>
</ul>


</div>  <!-- mainnav end -->

<div id="content">

<p>  2013</p>

<h2>Sun, 17 Nov 2013</h2>
<h3><a name="ssh_group_readable_identity">ssh: Group readable id_rsa identity file
</a></h3>
<div class="blosxomStory">
<p>Let's say you want to use a system wide ssh identity file to access (or push)
shared server state from different users on the system.</p>
<p>The naive way is to <tt class="docutils literal">chmod 0640 /system/wide/id_rsa</tt>.  Only ssh will complain
loudly about that without a way to disable the error:</p>
<pre class="literal-block">
&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;
&#64;         WARNING: UNPROTECTED PRIVATE KEY FILE!          &#64;
&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;&#64;
Permissions 0640 for '/etc/git-readonly/id_rsa' are too open.
It is recommended that your private key files are NOT accessible by others.
This private key will be ignored.
bad permissions: ignore key: /etc/git-readonly/id_rsa
</pre>
<p>The usual answer to this is that you do not do that.  Use different keys per
user or host based checking or an ssh-agent.</p>
<p>But lets say you really want to.  A viable workaround is to make a copy of the
file with the right permissions:</p>
<p>My ssh wrapper for this is:</p>
<pre class="literal-block">
RSA=$HOME/.ssh/git-readonly-id_rsa
cat /etc/git-readonly/id_rsa &gt; &quot;$RSA&quot;
chmod 0600 &quot;$RSA&quot;
exec ssh  -o UserKnownHostsFile=/etc/git-readonly/known_hosts -o StrictHostKeyChecking=yes -i &quot;$RSA&quot; &quot;$&#64;&quot;
</pre>
<p>Use at your own risk!</p>
<p></p>

<p class="posted">
  posted at 16:00 |
  path: <a href="https://l4x.org/unix" title="path">/unix</a> |
  <a href="https://l4x.org/unix/ssh_group_readable_identity.html" title="ssh: Group readable id_rsa identity file
">permanent link to this entry</a>
</p>
</div>

<h2>Sat, 16 Nov 2013</h2>
<h3><a name="gevent_wsgi_vs_pywsgi">Python: gevent's WSGIServer, wsgi vs. pywsgi
</a></h3>
<div class="blosxomStory">
<p>The gevent wsgi server is one of the fastest out in the open.
I switched part of my applications to it and everything worked
fine after restarting the server and testing locally.  Unfortunately my
<tt class="docutils literal">haproxy</tt> frontend loadbalancer is not able to see the new backend
though.  Turns out that <tt class="docutils literal">gevent.wsgi</tt> does not support HTTP 1.0 which
<tt class="docutils literal">haproxy</tt> uses for health checking.</p>
<p>The simple solution is to use <tt class="docutils literal">gevent.pywsgi</tt>.  This has some performance
penalty though.</p>
<p>An alternative might be (untested) to configure <tt class="docutils literal">haproxy</tt> with HTTP 1.1
healthchecks:</p>
<pre class="literal-block">
option httpchk OPTIONS / 1.1
</pre>
<p></p>

<p class="posted">
  posted at 16:00 |
  path: <a href="https://l4x.org/python" title="path">/python</a> |
  <a href="https://l4x.org/python/gevent_wsgi_vs_pywsgi.html" title="Python: gevent's WSGIServer, wsgi vs. pywsgi
">permanent link to this entry</a>
</p>
</div>

<h2>Tue, 08 Oct 2013</h2>
<h3><a name="camera_uploads_instant_stream">Instant Camera Upload Apps on iOS and Android
</a></h3>
<div class="blosxomStory">
<p>Apple 'Photostream', Dropbox 'Camera Uploads' and Google+ 'Instant Uploads' - out of those one is clearly superior as it</p>
<ol class="loweralpha simple">
<li>uploads on multiple phones to the same account</li>
<li>uploads videos and images originals (including exif tags)</li>
<li>synchronizes (= download) to a headless linux machine for backups</li>
<li>works on iOS and Android</li>
<li>works in the background</li>
</ol>
<p>And the winner is: <a class="reference external" href="https://db.tt/F3Guurbv">Dropbox</a>!</p>
<p>The downside of not using the Google+ app is that it has to upload the same photo again (in limited resolution).  But practically I don't think we share more than 10% of the photos we make.  The other downside of G+ though is that at least on iOS it resizes photos.  Also there is no easy way to download the images and you cannot use a different account (unless you also want to share the G+ stream).</p>
<p>Apple Photostream is a very confined eco-system, downloading requires a Windows VM with the iCloud control panel program (yeah, been there done that).  For N iCloud users you need N user accounts which need to be configured etc.  And then it still stopped working randomly.  And it doesn't support videos.</p>
<p></p>

<p class="posted">
  posted at 21:00 |
  path: <a href="https://l4x.org/apps" title="path">/apps</a> |
  <a href="https://l4x.org/apps/camera_uploads_instant_stream.html" title="Instant Camera Upload Apps on iOS and Android
">permanent link to this entry</a>
</p>
</div>

<h2>Sun, 06 Oct 2013</h2>
<h3><a name="debian_mac_mini_efi_read_only">Debian on Mac Mini (late 2011 model)</a></h3>
<div class="blosxomStory">

I just had a random hard drive corruption on my headless Mac Mini running Debian Wheezy.
Restarting it dropped to a prompt.  So I had to get out the monitor and keyboard to press 'Y' a few times.

This made me do 2 things I had postponed for a while for the risk of bricking the system:
<ol>
<li>Getting rid of rEFIt and instead use grub in native EFI mode.
<p><a href="http://glandium.org/blog/?p=2830">This guide</a> was very helpful.  Only I used the
existing fat32 partition on the drive.  This also allowed me to delete the existing MacOS
partition, very helpful on a 120G ssd.  The free'd 50G of disk space I subsequently used to...</p>
</li>
<li>Make the root partition readonly<p>
I used the now empty 50G, mkfs.ext4 as ext4 (disk alignment should start at a multiple of 64M) and
hooked it up as /var.  With /home already on a different disk I could use the <a href="https://wiki.debian.org/ReadonlyRoot">ReadonlyRoot</a> article
on the Debian wiki to mount my root filesystem readonly.  Hopefully this will prevent any future corruption preventing the system from booting.
</li>
</ol>



<p class="posted">
  posted at 18:00 |
  path: <a href="https://l4x.org/unix" title="path">/unix</a> |
  <a href="https://l4x.org/unix/debian_mac_mini_efi_read_only.html" title="Debian on Mac Mini (late 2011 model)">permanent link to this entry</a>
</p>
</div>

<h2>Thu, 05 Sep 2013</h2>
<h3><a name="psi_chat">psi chat client disconnecting all the time?</a></h3>
<div class="blosxomStory">

Try:
<pre>
# psi --status=online &gt;/dev/null 2>&1
*/5 * * * * dbus-send --type=method_call --dest=org.psi-im.Psi /Main org.psi_im.Psi.Main.setStatus string:"online" string:""
</pre>



<p class="posted">
  posted at 23:00 |
  path: <a href="https://l4x.org/unix" title="path">/unix</a> |
  <a href="https://l4x.org/unix/psi_chat.html" title="psi chat client disconnecting all the time?">permanent link to this entry</a>
</p>
</div>

</div>


<div id="sidebar">
<h2>Random Photo</h2>
<div class="sidebarbox">
<script><!-- //http://code.google.com/apis/gdata/docs/json.html
var es = [];
function r() {
	var idx = Math.floor(Math.random()*es.length);
	var m = es[idx]['media$group'];
	var i = document.getElementById("i");
	document.getElementById("t").innerHTML = m['media$description']['$t'];
	i.src = m['media$thumbnail'][0]['url'];
	setTimeout("r();",10*1000);
}
function j(p) {
	es = p['feed']['entry'];
	r();
}
function picasa() {
	var url='https://picasaweb.google.com/data/feed/base/user/jan.dittmer?kind=photo&thumbsize=160c&access=public&alt=json&callback=j';
	var s = document.createElement('script');
	s.src = url; document.body.appendChild(s);
}
window.onload = picasa;
//--></script>
<a href="http://picasaweb.google.com/jan.dittmer"> <img id="i"> </a>
<div id="t"></div>
</div>

<h2>Archives</h2>
<div class="sidebarbox">
	<li><a href="https://l4x.org/2016/Dec">Dec 2016</a></li>
<li><a href="https://l4x.org/2015/Feb">Feb 2015</a></li>
<li><a href="https://l4x.org/2014/Dec">Dec 2014</a></li>
<li><a href="https://l4x.org/2014/Jun">Jun 2014</a></li>
<li><a href="https://l4x.org/2014/Mar">Mar 2014</a></li>
<li><a href="https://l4x.org/2014/Feb">Feb 2014</a></li>
<li><a href="https://l4x.org/2013/Nov">Nov 2013</a></li>
<li><a href="https://l4x.org/2013/Oct">Oct 2013</a></li>
<li><a href="https://l4x.org/2013/Sep">Sep 2013</a></li>
<li><a href="https://l4x.org/2011/Jan">Jan 2011</a></li>
<li><a href="https://l4x.org/2010/Nov">Nov 2010</a></li>
<li><a href="https://l4x.org/2010/Oct">Oct 2010</a></li>
<li><a href="https://l4x.org/2010/Aug">Aug 2010</a></li>
<li><a href="https://l4x.org/2010/Feb">Feb 2010</a></li>
<li><a href="https://l4x.org/2010/Jan">Jan 2010</a></li>
<li><a href="https://l4x.org/2009/Sep">Sep 2009</a></li>
<li><a href="https://l4x.org/2008/Nov">Nov 2008</a></li>
<li><a href="https://l4x.org/2008/Jun">Jun 2008</a></li>
<li><a href="https://l4x.org/2008/Apr">Apr 2008</a></li>
<li><a href="https://l4x.org/2007/Sep">Sep 2007</a></li>
<li><a href="https://l4x.org/2007/Mar">Mar 2007</a></li>
<li><a href="https://l4x.org/2006/Nov">Nov 2006</a></li>
<li><a href="https://l4x.org/2006/Sep">Sep 2006</a></li>
<li><a href="https://l4x.org/2006/Aug">Aug 2006</a></li>
<li><a href="https://l4x.org/2006/Jun">Jun 2006</a></li>
<li><a href="https://l4x.org/2005/Jun">Jun 2005</a></li>
<li><a href="https://l4x.org/2005/May">May 2005</a></li>
<li><a href="https://l4x.org/2004/May">May 2004</a></li>
<li><a href="https://l4x.org/2003/Nov">Nov 2003</a></li>
</div>

<h2>Feed</h2>
<div class="sidebarbox">
<a title="RSS" href="https://l4x.org/index.rss20"> RSS </a> /
<a title="ATOM" href="https://l4x.org/index.atom"> ATOM  </a>
</div>

</div><!-- sidebar end -->


<div id="license">
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
</div>
</body>
</html>
